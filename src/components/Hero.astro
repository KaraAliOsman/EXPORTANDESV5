---
import { url } from "@/utils/paths";

interface Props {
  title: string;
  subtitle: string;
  ctaText?: string;
  ctaHref?: string;
  image?: string;
}

const {
  title,
  subtitle,
  ctaText = "Cotizar ahora",
  ctaHref = url("vender"),
  image = "https://images.unsplash.com/photo-1504328345606-18bbc8c9d7d1?w=1920&q=80&auto=format",
} = Astro.props;
---

<section class="relative min-h-[100dvh] flex items-end overflow-hidden">
  <!-- Background -->
  <div class="absolute inset-0" id="hero-parallax">
    <img src={image} alt="" class="w-full h-full object-cover" loading="eager" fetchpriority="high" />
  </div>
  <div class="absolute inset-0 bg-gradient-to-t from-[#0a0a0a] via-[#0a0a0a]/50 to-transparent"></div>

  <!-- Content -->
  <div class="relative z-10 w-full max-w-7xl mx-auto px-5 sm:px-8 pb-16 sm:pb-24 pt-40">
    <div class="max-w-2xl">
      <p class="text-xs sm:text-sm font-medium tracking-[0.25em] uppercase text-white/50 mb-4 sm:mb-6 animate-fade-in">
        Concepcion &mdash; Biobio
      </p>

      <h1 class="font-sans font-black text-[2.5rem] sm:text-6xl md:text-7xl text-white leading-[0.95] tracking-tight animate-slide-up">
        {title}
      </h1>

      <p class="mt-5 sm:mt-8 text-base sm:text-lg text-white/60 max-w-md leading-relaxed animate-slide-up" style="animation-delay:0.1s">
        {subtitle}
      </p>

      <div class="mt-8 sm:mt-12 flex flex-wrap items-center gap-4 animate-slide-up" style="animation-delay:0.2s">
        <a href={ctaHref} class="inline-flex items-center gap-3 px-7 py-3.5 bg-white text-black font-semibold text-sm uppercase tracking-wide hover:bg-white/90 transition-colors">
          {ctaText}
          <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 19.5l15-15m0 0H8.25m11.25 0v11.25" /></svg>
        </a>
        <a href={url("tarifas")} class="inline-flex items-center gap-2 px-7 py-3.5 border border-white/20 text-white/80 text-sm uppercase tracking-wide hover:bg-white/5 transition-colors">
          Ver tarifas
        </a>
      </div>
    </div>
  </div>
</section>

<script>
  const p = document.getElementById("hero-parallax");
  if (p && window.matchMedia("(prefers-reduced-motion: no-preference)").matches) {
    window.addEventListener("scroll", () => {
      if (window.scrollY < window.innerHeight) p.style.transform = `translateY(${window.scrollY * 0.25}px)`;
    }, { passive: true });
  }
</script>
